<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Gazettm">





<title>洛谷练习25-7-7 | Gazettm&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Gazettm&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Gazettm&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/categories">Categories</a>
                
                    <a class="menu-item" href="/tags">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">洛谷练习25-7-7</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Gazettm</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">七月 7, 2025&nbsp;&nbsp;18:16:11</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/c/">c++</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="P1098-NOIP-2007-提高组-字符串的展开"><a href="#P1098-NOIP-2007-提高组-字符串的展开" class="headerlink" title="P1098 [NOIP 2007 提高组] 字符串的展开"></a>P1098 [NOIP 2007 提高组] 字符串的展开</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>在初赛普及组的“阅读程序写结果”的问题中，我们曾给出一个字符串展开的例子：如果在输入的字符串中，含有类似于 <code>d-h</code> 或者 <code>4-8</code> 的字串，我们就把它当作一种简写，输出时，用连续递增的字母或数字串替代其中的减号，即，将上面两个子串分别输出为 <code>defgh</code> 和 <code>45678</code>。在本题中，我们通过增加一些参数的设置，使字符串的展开更为灵活。具体约定如下：</p>
<p>(1) 遇到下面的情况需要做字符串的展开：在输入的字符串中，出现了减号 <code>-</code> ，减号两侧同为小写字母或同为数字，且按照 <code>ASCII</code> 码的顺序，减号右边的字符严格大于左边的字符。</p>
<p>(2) 参数 <em>p</em>1：展开方式。<em>p</em>1&#x3D;1 时，对于字母子串，填充小写字母；<em>p</em>1&#x3D;2 时，对于字母子串，填充大写字母。这两种情况下数字子串的填充方式相同。<em>p</em>1&#x3D;3 时，不论是字母子串还是数字字串，都用与要填充的字母个数相同的星号 <code>*</code> 来填充。</p>
<p>(3) 参数 <em>p</em>2：填充字符的重复个数。<em>p</em>2&#x3D;<em>k</em> 表示同一个字符要连续填充 <em>k</em> 个。例如，当 <em>p</em>2&#x3D;3 时，子串<code>d-h</code> 应扩展为 <code>deeefffgggh</code>。减号两边的字符不变。</p>
<p>(4) 参数 <em>p</em>3：是否改为逆序：<em>p</em>3&#x3D;1 表示维持原来顺序，<em>p</em>3&#x3D;2 表示采用逆序输出，注意这时候仍然不包括减号两端的字符。例如当 <em>p</em>1&#x3D;1、<em>p</em>2&#x3D;2、<em>p</em>3&#x3D;2 时，子串 <code>d-h</code> 应扩展为 <code>dggffeeh</code>。</p>
<p>(5) 如果减号右边的字符恰好是左边字符的后继，只删除中间的减号，例如：<code>d-e</code> 应输出为 <code>de</code>，<code>3-4</code> 应输出为 <code>34</code>。如果减号右边的字符按照 <code>ASCII</code> 码的顺序小于或等于左边字符，输出时，要保留中间的减号，例如：<code>d-d</code> 应输出为 <code>d-d</code>，<code>3-1</code> 应输出为 <code>3-1</code>。</p>
<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>共两行。</p>
<p>第 1 行为用空格隔开的 3 个正整数，依次表示参数 <em>p</em>1,<em>p</em>2,<em>p</em>3。</p>
<p>第 2 行为一行字符串，仅由数字、小写字母和减号 <code>-</code> 组成。行首和行末均无空格。</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>共一行，为展开后的字符串。</p>
<h2 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 1</span><br><span class="line">abcs-w1234-9s-4zz</span><br></pre></td></tr></table></figure>

<p><strong>输出 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abcsttuuvvw1234556677889s-4zz</span><br></pre></td></tr></table></figure>

<p><strong>输入 #2</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 3 2</span><br><span class="line">a-d-d</span><br></pre></td></tr></table></figure>

<p><strong>输出 #2</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aCCCBBBd-d</span><br></pre></td></tr></table></figure>

<h2 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明&#x2F;提示"></a>说明&#x2F;提示</h2><p>40% 的数据满足：字符串长度不超过 5。</p>
<p>100% 的数据满足：1≤<em>p</em>1≤3,1≤<em>p</em>2≤8,1≤<em>p</em>3≤2。字符串长度不超过 100。</p>
<p>NOIP 2007 提高第二题</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">string <span class="title">func</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n,<span class="type">int</span> p,<span class="type">int</span> ascii_a,<span class="type">int</span> ascii_b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">bool</span> if_extended;</span><br><span class="line">	<span class="type">int</span> m, n, p;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n&gt;&gt;p;</span><br><span class="line">	string a , result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	cin&gt;&gt;a;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; a.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(a[i] != <span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">			result += a[i];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>((a[i<span class="number">-1</span>] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; a[i<span class="number">+1</span>] &lt;= <span class="string">&#x27;z&#x27;</span>) || (a[i<span class="number">-1</span>] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; a[i<span class="number">+1</span>] &lt;= <span class="string">&#x27;Z&#x27;</span>) ||a[i<span class="number">-1</span>] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; a[i<span class="number">+1</span>] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">				if_extended = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span>(a[i<span class="number">-1</span>] + <span class="number">1</span> == a[i<span class="number">+1</span>])&#123;</span><br><span class="line">				result += a[i<span class="number">+1</span>];</span><br><span class="line">				i++;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a[i<span class="number">-1</span>] &gt;= a[i<span class="number">+1</span>] || if_extended == <span class="literal">false</span>)&#123;</span><br><span class="line">				result = result + <span class="string">&quot;-&quot;</span> + a[i<span class="number">+1</span>]; </span><br><span class="line">				i++;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> ascii_a = a[i<span class="number">-1</span>];</span><br><span class="line">				<span class="type">int</span> ascii_b = a[i<span class="number">+1</span>];</span><br><span class="line">				result += <span class="built_in">func</span>(m,n,p,ascii_a,ascii_b);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		if_extended = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">func</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n,<span class="type">int</span> p,<span class="type">int</span> ascii_a,<span class="type">int</span> ascii_b)</span></span>&#123;</span><br><span class="line">	string re = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="type">char</span> temp;</span><br><span class="line">	<span class="keyword">switch</span>(m)&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = ascii_a<span class="number">+1</span>;i &lt; ascii_b;i++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; n;j++)&#123;</span><br><span class="line">				temp = i;</span><br><span class="line">				re += temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; re.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">			<span class="type">char</span> c = re[i];</span><br><span class="line">			<span class="keyword">if</span>(c &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;Z&#x27;</span>)&#123;</span><br><span class="line">				re[i] += <span class="number">32</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(p == <span class="number">2</span>)&#123;</span><br><span class="line">			<span class="built_in">reverse</span>(re.<span class="built_in">begin</span>(),re.<span class="built_in">end</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = ascii_a<span class="number">+1</span>;i &lt; ascii_b;i++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; n;j++)&#123;</span><br><span class="line">				temp = i;</span><br><span class="line">				re += temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; re.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">			<span class="type">char</span> c = re[i];</span><br><span class="line">			<span class="keyword">if</span>(c &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">				re[i] -= <span class="number">32</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(p == <span class="number">2</span>)&#123;</span><br><span class="line">			<span class="built_in">reverse</span>(re.<span class="built_in">begin</span>(),re.<span class="built_in">end</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = ascii_a<span class="number">+1</span>;i &lt; ascii_b;i++)&#123;P1786 帮贡排序</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; n;j++)&#123;</span><br><span class="line">				re += <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(p == <span class="number">2</span>)&#123;</span><br><span class="line">			<span class="built_in">reverse</span>(re.<span class="built_in">begin</span>(),re.<span class="built_in">end</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="P1786-帮贡排序"><a href="#P1786-帮贡排序" class="headerlink" title="P1786 帮贡排序"></a>P1786 帮贡排序</h1><h2 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h2><blockquote>
<p>帮派名号：星月家园</p>
<p>帮主尊号：Dragonfly Kang</p>
<p>帮派 ID：2685023</p>
<p>帮派等级：4</p>
<p>帮派人数：101&#x2F;110</p>
<p>帮派技能：（？）</p>
</blockquote>
<p>“星月家园”资料，欢迎各位豆友加入 ^_^</p>
<hr>
<p>在 absi2011 的帮派里，死号偏多。现在 absi2011 和帮主等人联合决定，要清除一些死号，加进一些新号，同时还要鼓励帮贡多的人，对帮派进行一番休整。</p>
<h2 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h2><p>目前帮派内共最多有：</p>
<ul>
<li>1 位帮主（BangZhu）</li>
<li>2 位副帮主（FuBangZhu）</li>
<li>2 位护法（HuFa）</li>
<li>4 位长老（ZhangLao）</li>
<li>7 位堂主（TangZhu）</li>
<li>25 名精英（JingYing）</li>
<li>若干（数量不限）帮众（BangZhong）</li>
</ul>
<p>保证以上职位是从高到低排列的。</p>
<p>现在 absi2011 要对帮派内几乎所有人的职位全部调整一番。他发现这是个很难的事情。于是要求你帮他调整。</p>
<p>他给你每个人的以下数据：</p>
<ul>
<li>名字</li>
<li>原来职位</li>
<li>帮贡</li>
<li>等级</li>
</ul>
<p>他要按照以下关键字给帮派内的人（帮主、副帮主除外）按以下关键字排序：</p>
<ul>
<li>帮贡（从高到低）第一关键字</li>
<li>在输入中出现的顺序（从前到后）第二关键字</li>
</ul>
<p>然后更新这些人的职位：</p>
<ul>
<li>第 1∼2 名：护法</li>
<li>第 3∼6 名：长老</li>
<li>第 7∼13 名：堂主</li>
<li>第 14∼38 名：精英</li>
<li>第 39∼(<em>n</em>−3) 名：帮众</li>
</ul>
<p>可是，乐斗的显示并不按帮贡排序而按职位和等级排序。</p>
<p>他要你按照以下关键字排序并求出最后乐斗显示的列表（在他调整过职位后）：</p>
<ul>
<li>职位（从高到低）第一关键字</li>
<li>等级（从高到低）第二关键字</li>
<li>在输入中出现的顺序（从前到后）第三关键字</li>
</ul>
<p>注意：absi2011 无权调整帮主、副帮主的职位，包括他自己的。</p>
<h2 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行一个正整数 <em>n</em>，表示星月家园内帮友的人数。</p>
<p>下面 <em>n</em> 行每行两个字符串两个整数，表示每个人的名字、职位、帮贡、等级。</p>
<h2 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h2><p>一共输出 <em>n</em> 行，每行包括排序后乐斗显示的名字、职位、等级。</p>
<h2 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">9</span><br><span class="line">DrangonflyKang BangZhu 100000 66</span><br><span class="line">RenZaiJiangHu FuBangZhu 80000 60</span><br><span class="line">absi2011 FuBangZhu 90000 60</span><br><span class="line">BingQiLingDeYanLei HuFa 89000 58</span><br><span class="line">Lcey HuFa 30000 49</span><br><span class="line">BangYou3 ZhangLao 1000 1</span><br><span class="line">BangYou1 TangZhu 100 40</span><br><span class="line">BangYou2 JingYing 40000 10</span><br><span class="line">BangYou4 BangZhong 400 1</span><br></pre></td></tr></table></figure>

<p><strong>输出 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DrangonflyKang BangZhu 66</span><br><span class="line">RenZaiJiangHu FuBangZhu 60</span><br><span class="line">absi2011 FuBangZhu 60</span><br><span class="line">BingQiLingDeYanLei HuFa 58</span><br><span class="line">BangYou2 HuFa 10</span><br><span class="line">Lcey ZhangLao 49</span><br><span class="line">BangYou1 ZhangLao 40</span><br><span class="line">BangYou3 ZhangLao 1</span><br><span class="line">BangYou4 ZhangLao 1</span><br></pre></td></tr></table></figure>

<h2 id="说明-提示-1"><a href="#说明-提示-1" class="headerlink" title="说明&#x2F;提示"></a>说明&#x2F;提示</h2><p>对于 10% 的数据，保证 <em>n</em>&#x3D;3。</p>
<p>对于 40% 的数据，保证各个人的帮贡均为 0。</p>
<p>对于 100% 的数据，保证：</p>
<ul>
<li>3≤<em>n</em>≤110</li>
<li>1≤ 名字长度 ≤30</li>
<li>所有名字两两不同</li>
<li>名字只包含 ASCII 可见字符</li>
<li>0≤ 各个人的帮贡 ≤109</li>
<li>1≤ 各个人等级 ≤150</li>
<li>职位必定为以下七个中的一个：<ul>
<li>BangZhu</li>
<li>FuBangZhu</li>
<li>HuFa</li>
<li>ZhangLao</li>
<li>TangZhu</li>
<li>JingYing</li>
<li>BangZhong</li>
</ul>
</li>
<li>初始时帮派内最多有：<ul>
<li>1 位帮主</li>
<li>2 位副帮主</li>
<li>2 位护法</li>
<li>4 位长老</li>
<li>7 位堂主</li>
<li>25 名精英</li>
</ul>
</li>
<li>恰好有一名帮主</li>
<li>恰好有两名副帮主</li>
<li>恰好有一名副帮主叫 absi2011</li>
</ul>
<p>【题目来源】</p>
<p>fight.pet.qq.com</p>
<p>absi2011 授权题目</p>
<h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">number</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	string name;</span><br><span class="line">	string f;</span><br><span class="line">	<span class="type">int</span> contribution;</span><br><span class="line">	<span class="type">int</span> level;</span><br><span class="line">	<span class="type">int</span> index;</span><br><span class="line">	<span class="type">int</span> f_n;</span><br><span class="line">&#125;; </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp_1</span><span class="params">(<span class="type">const</span> number&amp;a,<span class="type">const</span> number&amp;b )</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.contribution != b.contribution)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.contribution &gt; b.contribution;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a.index &lt; b.index;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp_2</span><span class="params">(<span class="type">const</span> number&amp;a,<span class="type">const</span> number&amp;b )</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.f_n != b.f_n)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.f_n &gt; b.f_n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(a.level != b.level)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.level &gt; b.level;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a.index &lt; b.index;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="function">vector&lt;number&gt; <span class="title">people</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n;i++)&#123;</span><br><span class="line">		cin&gt;&gt;people[i].name&gt;&gt;people[i].f&gt;&gt;people[i].contribution&gt;&gt;people[i].level;</span><br><span class="line">		people[i].index = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (people[i].f == <span class="string">&quot;BangZhu&quot;</span> || people[i].f == <span class="string">&quot;FuBangZhu&quot;</span>) &#123;</span><br><span class="line">			<span class="built_in">swap</span>(people[i], people[k]);</span><br><span class="line">			k++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(people.<span class="built_in">begin</span>() + k, people.<span class="built_in">end</span>(), cmp_1);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = k; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="type">int</span> rank = i - k;</span><br><span class="line">		<span class="keyword">if</span> (rank &lt; <span class="number">2</span>) &#123;</span><br><span class="line">			people[i].f = <span class="string">&quot;HuFa&quot;</span>;</span><br><span class="line">			people[i].f_n = <span class="number">5</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank &lt; <span class="number">6</span>) &#123;</span><br><span class="line">			people[i].f = <span class="string">&quot;ZhangLao&quot;</span>;</span><br><span class="line">			people[i].f_n = <span class="number">4</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank &lt; <span class="number">13</span>) &#123;</span><br><span class="line">			people[i].f = <span class="string">&quot;TangZhu&quot;</span>;</span><br><span class="line">			people[i].f_n = <span class="number">3</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank &lt; <span class="number">38</span>) &#123;</span><br><span class="line">			people[i].f = <span class="string">&quot;JingYing&quot;</span>;</span><br><span class="line">			people[i].f_n = <span class="number">2</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			people[i].f = <span class="string">&quot;BangZhong&quot;</span>;</span><br><span class="line">			people[i].f_n = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (people[i].f == <span class="string">&quot;BangZhu&quot;</span>) &#123;</span><br><span class="line">			people[i].f_n = <span class="number">7</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (people[i].f == <span class="string">&quot;FuBangZhu&quot;</span>) &#123;</span><br><span class="line">			people[i].f_n = <span class="number">6</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(people.<span class="built_in">begin</span>(), people.<span class="built_in">end</span>(), cmp_2);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span>&amp;w : people)&#123;</span><br><span class="line">		cout&lt;&lt;w.name&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;w.f&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;w.level&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>这里选择用class的类来把数据组合一起，这样比较好比较。</p>
<p>这个题的关键在于排序，可以使用<code>sort(people.begin() + k, people.end(), cmp_1);</code>来进行排序。这里的第三个参数是自定义的比较函数，可见sort函数功能十分强大。</p>
<h1 id="P1249-最大乘积"><a href="#P1249-最大乘积" class="headerlink" title="P1249 最大乘积"></a>P1249 最大乘积</h1><h2 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h2><p>一个正整数一般可以分为几个互不相同的自然数的和，如 3&#x3D;1+2，4&#x3D;1+3，5&#x3D;1+4&#x3D;2+3，6&#x3D;1+5&#x3D;2+4。</p>
<p>现在你的任务是将指定的正整数 <em>n</em> 分解成若干个互不相同的自然数（也可以不分解，就是这个数字本身）的和，且使这些自然数的乘积最大。</p>
<h2 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h2><p>只一个正整数 <em>n</em>，（3≤<em>n</em>≤10000）。</p>
<h2 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h2><p>第一行是分解方案，相邻的数之间用一个空格分开，并且按由小到大的顺序。</p>
<p>第二行是最大的乘积。</p>
<h2 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure>

<p><strong>输出 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 3 5</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BigInt</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">BigInt</span>()&#123;&#125;;</span><br><span class="line">	<span class="built_in">BigInt</span>(<span class="type">const</span> string &amp;a)&#123;</span><br><span class="line">		<span class="built_in">setBigInt</span>(a);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">setBigInt</span><span class="params">(<span class="type">const</span> string &amp;a)</span></span>&#123;</span><br><span class="line">		<span class="type">int</span> length = a.<span class="built_in">length</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = length - <span class="number">1</span>;i &gt;= <span class="number">0</span>;i--)&#123;</span><br><span class="line">			BI.<span class="built_in">push_back</span>(a[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getLength</span><span class="params">()</span> <span class="type">const</span></span>&#123;</span><br><span class="line">		<span class="type">int</span> length = BI.<span class="built_in">size</span>();</span><br><span class="line">		<span class="keyword">return</span> length;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">getBigInt</span><span class="params">()</span> <span class="type">const</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> BI;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">friend</span> BigInt <span class="keyword">operator</span>*(<span class="type">const</span> BigInt&amp;a,<span class="type">const</span> BigInt&amp;b);</span><br><span class="line">	BigInt&amp; <span class="keyword">operator</span>=(<span class="type">const</span> BigInt&amp;a)&#123;</span><br><span class="line">		<span class="keyword">this</span> -&gt; BI = a.<span class="built_in">getBigInt</span>();</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = BI.<span class="built_in">size</span>() - <span class="number">1</span>;i &gt;= <span class="number">0</span>;i--)&#123;</span><br><span class="line">			cout&lt;&lt;BI[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; BI;</span><br><span class="line">&#125;;</span><br><span class="line">BigInt <span class="keyword">operator</span>*(<span class="type">const</span> BigInt&amp;a,<span class="type">const</span> BigInt&amp;b)&#123;</span><br><span class="line">	BigInt result;</span><br><span class="line">	<span class="type">int</span> length_a = a.<span class="built_in">getLength</span>();</span><br><span class="line">	<span class="type">int</span> length_b = b.<span class="built_in">getLength</span>();</span><br><span class="line">	result.BI.<span class="built_in">resize</span>(length_a + length_b, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length_a; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; length_b; j++) &#123;</span><br><span class="line">			result.BI[i + j] += a.BI[i] * b.BI[j];</span><br><span class="line">			result.BI[i + j + <span class="number">1</span>] += result.BI[i + j] / <span class="number">10</span>;</span><br><span class="line">			result.BI[i + j] %= <span class="number">10</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (result.BI.<span class="built_in">size</span>() &gt; <span class="number">1</span> &amp;&amp; result.BI.<span class="built_in">back</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">		result.BI.<span class="built_in">pop_back</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	<span class="function">BigInt <span class="title">result</span><span class="params">(<span class="string">&quot;1&quot;</span>)</span></span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">3</span>)&#123;</span><br><span class="line">		cout&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;<span class="number">2</span>&lt;&lt;endl&lt;&lt;<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">4</span>)&#123;</span><br><span class="line">		cout&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;<span class="number">3</span>&lt;&lt;endl&lt;&lt;<span class="number">3</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">5</span>)&#123;</span><br><span class="line">		cout&lt;&lt;<span class="number">2</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;<span class="number">3</span>&lt;&lt;endl&lt;&lt;<span class="number">5</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>;i &lt;= n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(total + i &lt;= n )&#123;</span><br><span class="line">			total += i;</span><br><span class="line">			v.<span class="built_in">push_back</span>(i);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> remainder = n - total;</span><br><span class="line">	<span class="type">int</span> zero_based_length = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(remainder != <span class="number">0</span>)&#123;</span><br><span class="line">		v[zero_based_length]++;</span><br><span class="line">		zero_based_length--;</span><br><span class="line">		<span class="keyword">if</span>(zero_based_length &lt; <span class="number">0</span>)zero_based_length = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">		remainder--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i : v)&#123;</span><br><span class="line">		cout&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		<span class="function">BigInt <span class="title">temp</span><span class="params">(to_string(i))</span></span>;</span><br><span class="line">		result = result * temp;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	result.<span class="built_in">print</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h2><p>这个题，是要求正整数的最大乘积，因此就需要把正整数拆分为不同的正整数。</p>
<p>根据自己列出来的几个数，我们因此知道数越多越好，从2开始一直乘到不能乘为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>;i &lt;= n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(total + i &lt;= n )&#123;</span><br><span class="line">			total += i;</span><br><span class="line">			v.<span class="built_in">push_back</span>(i);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>这样处理之后，会产生剩余，这些数相加之后并不等于n，因此需要再处理一下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> remainder = n - total;</span><br><span class="line"><span class="type">int</span> zero_based_length = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(remainder != <span class="number">0</span>)&#123;</span><br><span class="line">	v[zero_based_length]++;</span><br><span class="line">	zero_based_length--;</span><br><span class="line">	<span class="keyword">if</span>(zero_based_length &lt; <span class="number">0</span>)zero_based_length = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">	remainder--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里选择这样处理。比如10，我们分到了2，3，4 &#x3D; 9，再加一个 5 便会大于 10， 这里倒序 + 1 可以让它变最大。</p>
<p><code>2 * 3 * 5 = 30</code></p>
<p>然后因为是高精度，所以加上之前写好的<code>BigInt</code>类，实现高精度</p>
<p>详情见<a href="https://gazettm.github.io/2025/04/26/BigInt%E7%B1%BB%E5%AE%9E%E7%8E%B0%E6%AD%A3%E5%A4%A7%E6%95%B0-%EF%BC%8C-%EF%BC%8C-%E8%BF%90%E7%AE%97/">BigInt类实现正大数+，-，*运算 | Gazettm’s Blog</a></p>
<h1 id="P1045-NOIP-2003-普及组-麦森数"><a href="#P1045-NOIP-2003-普及组-麦森数" class="headerlink" title="P1045 [NOIP 2003 普及组] 麦森数"></a>P1045 [NOIP 2003 普及组] 麦森数</h1><h2 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h2><p>形如 2<em>P</em>−1 的素数称为麦森数，这时 <em>P</em> 一定也是个素数。但反过来不一定，即如果 <em>P</em> 是个素数，2<em>P</em>−1 不一定也是素数。到 1998 年底，人们已找到了 37 个麦森数。最大的一个是 <em>P</em>&#x3D;3021377，它有 909526 位。麦森数有许多重要应用，它与完全数密切相关。</p>
<p>任务：输入 <em>P</em>(1000&lt;<em>P</em>&lt;3100000)，计算 2<em>P</em>−1 的位数和最后 500 位数字（用十进制高精度数表示）</p>
<h2 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h2><p>文件中只包含一个整数 <em>P</em>(1000&lt;<em>P</em>&lt;3100000)</p>
<h2 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h2><p>第一行：十进制高精度数 2<em>P</em>−1 的位数。</p>
<p>第 2∼11 行：十进制高精度数 2<em>P</em>−1 的最后 500 位数字。（每行输出 50 位，共输出 10 行，不足 500 位时高位补 0）</p>
<p>不必验证 2<em>P</em>−1 与 <em>P</em> 是否为素数。</p>
<h2 id="输入输出样例-3"><a href="#输入输出样例-3" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1279</span><br></pre></td></tr></table></figure>

<p><strong>输出 #1</strong>复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">386</span><br><span class="line">00000000000000000000000000000000000000000000000000</span><br><span class="line">00000000000000000000000000000000000000000000000000</span><br><span class="line">00000000000000104079321946643990819252403273640855</span><br><span class="line">38615262247266704805319112350403608059673360298012</span><br><span class="line">23944173232418484242161395428100779138356624832346</span><br><span class="line">49081399066056773207629241295093892203457731833496</span><br><span class="line">61583550472959420547689811211693677147548478866962</span><br><span class="line">50138443826029173234888531116082853841658502825560</span><br><span class="line">46662248318909188018470682222031405210266984354887</span><br><span class="line">32958028878050869736186900714720710555703168729087</span><br></pre></td></tr></table></figure>

<h2 id="说明-提示-2"><a href="#说明-提示-2" class="headerlink" title="说明&#x2F;提示"></a>说明&#x2F;提示</h2><p><strong>【题目来源】</strong></p>
<p>NOIP 2003 普及组第四题</p>
<h2 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> a[<span class="number">500</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> r[<span class="number">500</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> t[<span class="number">500</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> rt[<span class="number">500</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a[<span class="number">0</span>] = <span class="number">2</span>,r[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> p;</span><br><span class="line">	cin&gt;&gt;p;</span><br><span class="line">	<span class="type">long</span> weishu = <span class="built_in">ceil</span>(p * <span class="built_in">log10</span>(<span class="number">2</span>));</span><br><span class="line">	cout&lt;&lt;weishu;</span><br><span class="line">	<span class="type">int</span> length = (weishu &gt; <span class="number">500</span>) ? <span class="number">499</span>:weishu;</span><br><span class="line">	<span class="keyword">while</span>(p != <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(p % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500</span>; i++) &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">500</span>; j++) &#123;</span><br><span class="line">					<span class="keyword">if</span>(i + j &gt; length) <span class="keyword">continue</span>;</span><br><span class="line">					rt[i + j] += r[i] * a[j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">499</span>;i++)&#123;</span><br><span class="line">				rt[i + <span class="number">1</span>] += rt[i] / <span class="number">10</span>;</span><br><span class="line">				rt[i] %= <span class="number">10</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			rt[<span class="number">499</span>] %= <span class="number">10</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">500</span>;i++)&#123;</span><br><span class="line">				r[i] = rt[i];</span><br><span class="line">				rt[i] = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500</span>; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">500</span>; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(i + j &gt; length) <span class="keyword">continue</span>;</span><br><span class="line">				t[i + j] += a[i] * a[j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">499</span>;i++)&#123;</span><br><span class="line">			t[i + <span class="number">1</span>] += t[i] / <span class="number">10</span>;</span><br><span class="line">			t[i] %= <span class="number">10</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		t[<span class="number">499</span>] %= <span class="number">10</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">500</span>;i++)&#123;</span><br><span class="line">			a[i] = t[i];</span><br><span class="line">			t[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		p = p / <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	r[<span class="number">0</span>]--;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">500</span>;i &gt; <span class="number">0</span>;i--)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i % <span class="number">50</span> == <span class="number">0</span>)&#123;</span><br><span class="line">			cout&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;r[i<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h2><p>首先输出位数，取log便可以算出来。</p>
<p>然后是输出低位500的数值。我们只需要储存低位500的值然后相乘便可以。</p>
<p>但是这样乘肯定会超时，于是利用快速幂的原理。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">Exponentiation_by_squaring</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="type">long</span> <span class="type">long</span> r = <span class="number">1</span>,a = m;</span><br><span class="line">	<span class="keyword">while</span>(n != <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(n % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">			r = r * a;</span><br><span class="line">		&#125;</span><br><span class="line">		a = a * a;</span><br><span class="line">		n = n / <span class="number">2</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> m,n,p;</span><br><span class="line">	cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">	<span class="type">long</span> <span class="type">long</span> result = <span class="built_in">Exponentiation_by_squaring</span>(m,n);</span><br><span class="line">	cout&lt;&lt;result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该代码是快速幂的一个模板。</p>
<p>原理为</p>
<p>example: 9 &#x3D; 2^8^ * 2^1^   <code>9 = 0b1001</code></p>
<table>
<thead>
<tr>
<th>1</th>
<th>0</th>
<th>0</th>
<th>1</th>
<th>result</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2^1^</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2^1^</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2^1^</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2^1^ * 2^8^</td>
</tr>
</tbody></table>
<p>然后是位数的操作需要小心。越界访问可能会导致数据覆盖导致出错，因此采用先乘再进位的策略。</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Gazettm</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://gazettm.github.io/2025/07/07/%E6%B4%9B%E8%B0%B7%E7%BB%83%E4%B9%A025-7-7/">http://gazettm.github.io/2025/07/07/%E6%B4%9B%E8%B0%B7%E7%BB%83%E4%B9%A025-7-7/</a></span>
                    </p>
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/c/"># c++</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2025/07/09/Python%E4%B8%AD%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8%E5%8F%A0%E5%8A%A0/">Python中的装饰器叠加</a>
            
            
            <a class="next" rel="next" href="/2025/07/02/%E6%B4%9B%E8%B0%B7%E7%BB%83%E4%B9%A025-7-2/">洛谷练习25-7-2</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Gazettm | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>